<!DOCTYPE html>
<html style="width: 100%;">
<!--

== OpenJSCAD.org, Copyright (c) 2016-2017, Licensed under MIT License ==
   in conjunction with other libraries by various authors (see the individual files)

Purpose:
  This application provides an example of how to show JSCAD designs with minimal HTML and CSS.
-->

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>OpenJSCAD.org Logo</title>
  <link rel="stylesheet" href="min.css" type="text/css">
</head>

<body onload="draw1('./soyimgs/inu.png');" style="width: 100%;">
  <!-- inputはドラック＆ドロップ対応してるらしい -->
  <input type="file" id="makesoyimg" style="position: absolute; top: 0px; left: 0px; width: 500px; height: 500px;">
  <canvas id="img_byouga" width="60" height="60" style="width: 60px; height: 60px;"></canvas>
  <script>
    let syouyu_image;
    let syouyu_canvas;
    let img = new Image();    //画像オブジェクト作成

    function draw1(imgname) {

      document.getElementById("makesoyimg").addEventListener("change", function (evt) {
        img.src = "./soyimgs/" + evt.target.files[0].name;  //写真のパスを指定する
        img.onload = function () {
          var ctx = document.getElementById("img_byouga").getContext("2d");
          ctx.drawImage(img, 0, 0, 60, 60);
          syouyu_canvas = document.getElementById("img_byouga").getContext("2d");
          syouyu_image = syouyu_canvas.getImageData(0, 0, 60, 60);
          document.getElementById("updateButton").click();
        }

      }, false);

      img.src = imgname;  //写真のパスを指定する
      img.onload = function () {
        var ctx = document.getElementById("img_byouga").getContext("2d");
        ctx.drawImage(img, 0, 0, 60, 60);
        syouyu_canvas = document.getElementById("img_byouga").getContext("2d");
        syouyu_image = syouyu_canvas.getImageData(0, 0, 60, 60);
      }
    }
  </script>
  <script src="dist/min.js"></script>
  <!-- setup display of the errors as required by OpenJSCAD.js -->
  <div class="jscad-container">
    <div id="header">
      <div id="errordiv">hello</div>
    </div>

    <!-- setup display of the viewer, i.e. canvas -->
    <div oncontextmenu="return false;" id="viewerContext" design-url="syouyuzara.jscad"></div>

    <!-- setup display of the status, as required by OpenJSCAD.js -->
    <!-- set display: block to display this -->
    <div id="tail" style="display: block;">
      <div id="statusdiv"></div>
    </div>
  </div>
</body>

</html>